(()=>{var e={};e.id=490,e.ids=[490],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6951:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),s(2091),s(5239),s(5130),s(5866);var a=s(3191),i=s(8716),r=s(7922),l=s.n(r),n=s(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["terminal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2091)),"C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\pos\\src\\app\\terminal\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5239)),"C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\pos\\src\\app\\terminal\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5130)),"C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\pos\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\pos\\src\\app\\terminal\\page.tsx"],x="/terminal/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/terminal/page",pathname:"/terminal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6383:(e,t,s)=>{Promise.resolve().then(s.bind(s,9676))},830:(e,t,s)=>{Promise.resolve().then(s.bind(s,6748))},8916:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},9676:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(326),i=s(7577),r=s(9086),l=s(5795),n=s(4559),c=s(8705),d=s(730),o=s(4061),x=s(1821),h=s(6464),p=s(8378),m=s(3634),u=s(8319),f=s(4019),g=s(748),v=s(8307),b=s(2915),j=s(434),y=s(5047);function w({children:e}){let t=(0,y.usePathname)(),[s,w]=(0,i.useState)(!0),N=[{id:"terminal",label:"Sales Terminal",icon:n.Z,href:"/terminal"},{id:"inventory",label:"Inventory Hub",icon:c.Z,href:"/terminal/inventory"},{id:"recipes",label:"Recipes",icon:d.Z,href:"/terminal/recipes"},{id:"staff",label:"Staff & Roles",icon:o.Z,href:"/terminal/staff"},{id:"cash",label:"Cash & Shifts",icon:x.Z,href:"/terminal/cash"},{id:"analytics",label:"Branch Analytics",icon:h.Z,href:"/terminal/analytics"},{id:"settings",label:"System Settings",icon:p.Z,href:"/terminal/settings"}];return(0,a.jsxs)("div",{className:"flex h-screen bg-[#020a08] text-nile-silver overflow-hidden",children:[a.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 bg-nile-dark/40 backdrop-blur-2xl border-r border-white/5 transition-transform duration-500 lg:relative lg:translate-x-0 ${s?"translate-x-0":"-translate-x-full"}`,children:(0,a.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,a.jsxs)(j.default,{href:"/",className:"flex items-center gap-4 mb-16 group",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-nile-silver flex items-center justify-center text-nile-dark shadow-xl",children:a.jsx(m.Z,{size:22,fill:"currentColor"})}),a.jsx("span",{className:"text-2xl font-black tracking-tighter text-nile-silver",children:"Terminal"})]}),a.jsx("nav",{className:"flex-1 space-y-2",children:N.map(e=>(0,a.jsxs)(j.default,{href:e.href,className:`flex items-center gap-4 px-6 py-4 rounded-2xl font-bold text-sm transition-all ${t===e.href?"bg-nile-silver text-nile-dark shadow-xl shadow-nile-silver/10":"text-nile-silver/40 hover:text-white hover:bg-white/5"}`,children:[a.jsx(e.icon,{size:20,strokeWidth:t===e.href?2.5:2}),e.label]},e.id))}),a.jsx("div",{className:"pt-8 border-t border-white/5",children:(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-nile-silver/20",children:"Sync Status"}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})]}),(0,a.jsxs)("div",{className:"text-xs font-bold text-nile-silver/50 flex items-center gap-2",children:[a.jsx(u.Z,{size:12}),"Local Ledger Active"]})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[(0,a.jsxs)("header",{className:"h-24 border-b border-white/5 flex items-center justify-between px-8 bg-black/20 backdrop-blur-xl shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx("button",{onClick:()=>w(!s),className:"lg:hidden p-2 text-nile-silver",children:s?a.jsx(f.Z,{size:24}):a.jsx(g.Z,{size:24})}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center gap-3 px-4 py-2 rounded-2xl bg-white/5 border border-white/5 text-nile-silver/30",children:[a.jsx(v.Z,{size:18}),a.jsx("input",{type:"text",placeholder:"Global Search...",className:"bg-transparent border-none focus:outline-none text-sm w-48"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-nile-silver/20",children:"Branch"}),a.jsx("span",{className:"text-sm font-bold text-white uppercase italic",children:"The Grand Cairo Grill"})]}),a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-nile-silver",children:a.jsx(b.Z,{size:22})})]})]}),a.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar p-8",children:a.jsx(r.M,{mode:"wait",children:a.jsx(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"h-full",children:e},t)})})]})]})}},6748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(326),i=s(7577),r=s(5795),l=s(5091),n=s(6557);let c=(0,n.Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var d=s(8319);let o=(0,n.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),x=(0,n.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var h=s(3855),p=s(8705);let m=(0,n.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),u=(0,n.Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var f=s(8916),g=s(3634),v=s(2576),b=s(5272);function j(){let{eventEngine:e,localLedger:t,recipeEngine:s,journalEngine:n,reputationEngine:j,isOnline:y,unsyncedCount:w,deviceId:N,branchId:k}=(0,v.F)(),[C,E]=(0,i.useState)([]),[M,P]=(0,i.useState)("All"),S=[{id:1,name:"Burger Classic",price:12,category:"Main",icon:"\uD83C\uDF54"},{id:2,name:"Truffle Fries",price:6.5,category:"Sides",icon:"\uD83C\uDF5F"},{id:3,name:"Cairo Special Pizza",price:18,category:"Main",icon:"\uD83C\uDF55"},{id:4,name:"Iced Latte",price:4.5,category:"Drinks",icon:"â˜•"},{id:5,name:"Lava Cake",price:9,category:"Dessert",icon:"\uD83C\uDF70"},{id:6,name:"Falafel Wrap",price:7.5,category:"Main",icon:"\uD83C\uDF2F"}],Z=["All",...Array.from(new Set(S.map(e=>e.category)))],D=e=>{C.find(t=>t.id===e.id)?E(C.map(t=>t.id===e.id?{...t,qty:t.qty+1}:t)):E([...C,{...e,qty:1}])},q=e=>{let t=C.find(t=>t.id===e);t&&t.qty>1?E(C.map(t=>t.id===e?{...t,qty:t.qty-1}:t)):E(C.filter(t=>t.id!==e))},z=C.reduce((e,t)=>e+t.price*t.qty,0),_=async a=>{if(0!==C.length&&e&&t)try{let i=`ord-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,r="staff-default",l=await e.createEvent(b.t.ORDER_CREATED,r,{orderId:i,orderType:"dine-in"});for(let a of(await t.insertEvent(l),n&&await n.processEvent(l),C)){let l=await e.createEvent(b.t.ORDER_ITEM_ADDED,r,{orderId:i,menuItemId:a.id.toString(),menuItemName:a.name,quantity:a.qty,unitPrice:a.price});if(await t.insertEvent(l),s)try{for(let l of s.deductForSale(a.id.toString(),a.qty,k)){let s=await e.createEvent(b.t.INVENTORY_DEDUCTED,r,{ingredientId:l.ingredientId,ingredientName:l.ingredientName,quantity:l.deducted,unit:l.unit,reason:"sale",relatedOrderId:i});await t.insertEvent(s),n&&await n.processEvent(s)}}catch(e){console.warn(`No recipe found for ${a.name}, skipping inventory anchor.`)}}let c="cash"===a?b.t.PAYMENT_COLLECTED_CASH:b.t.PAYMENT_COLLECTED_CARD,d={orderId:i,amount:z,currency:"USD"};"cash"===a?(d.amountTendered=z,d.changeGiven=0,d.cashierId=r):(d.cardType="visa",d.last4Digits="4242",d.transactionId=`tx-${Date.now()}`,d.providerFee=.02*z);let o=await e.createEvent(c,r,d);await t.insertEvent(o),n&&await n.processEvent(o),E([]),alert("Protocol Anchored: Order Settlement Complete")}catch(e){console.error("Checkout failed",e),alert("Protocol Error: Could not anchor event.")}};return(0,a.jsxs)("div",{className:"h-screen flex flex-col relative text-white selection:bg-emerald-500/30 overflow-hidden font-sans",children:[a.jsx("div",{className:"mesh-bg"}),(0,a.jsxs)("header",{className:"h-20 glass-v2 border-b border-white/5 flex items-center justify-between px-10 relative z-20",children:[a.jsx("div",{className:"flex items-center gap-6",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h1",{className:"text-2xl font-black italic tracking-tighter nile-text-gradient uppercase leading-none",children:"Nile Terminal"}),(0,a.jsxs)("span",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-white/20 mt-1",children:["Node: ",N||"Cairo-ST-01"]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-8",children:[(0,a.jsxs)("div",{className:"hidden lg:flex items-center gap-6 px-6 py-2 rounded-full glass-v2 border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[y?a.jsx(l.Z,{size:14,className:"text-emerald-400"}):a.jsx(c,{size:14,className:"text-red-400"}),a.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${y?"text-emerald-400/60":"text-red-400/60"}`,children:y?"Network Live":"Offline Mode"})]}),a.jsx("div",{className:"w-px h-4 bg-white/10"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-white/30",children:[a.jsx(d.Z,{size:14}),(0,a.jsxs)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:[w," Queued Events"]})]})]}),a.jsx("button",{className:"w-12 h-12 rounded-2xl glass-v2 flex items-center justify-center text-white/40 hover:text-white transition-all",children:a.jsx(o,{size:20})}),a.jsx("button",{className:"w-12 h-12 rounded-2xl glass-v2 flex items-center justify-center text-white/40 hover:text-white transition-all",children:a.jsx(x,{size:20})})]})]}),(0,a.jsxs)("main",{className:"flex-1 flex overflow-hidden relative z-10",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col p-10 overflow-hidden",children:[a.jsx("div",{className:"flex gap-4 mb-10 overflow-x-auto pb-4 no-scrollbar",children:Z.map(e=>a.jsx("button",{onClick:()=>P(e),className:`px-10 py-4 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all whitespace-nowrap ${M===e?"bg-emerald-500 text-black shadow-lg shadow-emerald-500/20":"glass-v2 text-white/40 hover:bg-white/5"}`,children:e},e))}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-10",children:a.jsx(r.E.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:S.filter(e=>"All"===M||e.category===M).map((e,t)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>D(e),className:"p-8 rounded-[2.5rem] glass-v2 flex flex-col gap-6 active:scale-95 transition-all cursor-pointer group hover:border-emerald-500/30",children:[a.jsx("div",{className:"w-16 h-16 rounded-3xl bg-black border border-white/5 flex items-center justify-center text-4xl shadow-2xl group-hover:scale-110 transition-transform",children:e.icon}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-emerald-400 transition-colors uppercase italic tracking-tighter",children:e.name}),a.jsx("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.2em] mt-1",children:e.category})]}),(0,a.jsxs)("div",{className:"mt-auto flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-2xl font-black italic text-white/80",children:["$",e.price.toFixed(2)]}),a.jsx("div",{className:"w-10 h-10 rounded-xl glass-v2 flex items-center justify-center text-emerald-400 opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(h.Z,{size:20})})]})]},e.id))})})]}),a.jsx("div",{className:"w-[450px] glass-v2 border-l border-white/5 flex flex-col relative overflow-hidden",children:(0,a.jsxs)("div",{className:"p-10 flex flex-col h-full bg-black/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[a.jsx("h2",{className:"text-xl font-black italic uppercase tracking-tighter nile-text-gradient",children:"Active Cart"}),a.jsx("button",{onClick:()=>E([]),className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/20 hover:text-red-400 transition-colors",children:"Clear"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-6",children:0===C.length?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-10 opacity-20",children:[a.jsx(p.Z,{size:64,className:"mb-6"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Payload Empty"})]}):C.map((e,t)=>(0,a.jsxs)(r.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center gap-6 p-6 rounded-3xl glass-v2 border-white/5 group",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/5 flex items-center justify-center text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-bold text-white uppercase italic tracking-tighter truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest mt-1",children:["$",e.price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>q(e.id),className:"w-10 h-10 rounded-xl glass-v2 flex items-center justify-center hover:bg-white/5",children:a.jsx(m,{size:14})}),a.jsx("span",{className:"w-6 text-center text-lg font-black italic",children:e.qty}),a.jsx("button",{onClick:()=>D(e),className:"w-10 h-10 rounded-xl glass-v2 flex items-center justify-center hover:bg-white/5",children:a.jsx(h.Z,{size:14})})]})]},e.id))}),(0,a.jsxs)("div",{className:"mt-10 space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-4 pt-8 border-t border-white/10",children:[(0,a.jsxs)("div",{className:"flex justify-between text-[11px] font-black uppercase tracking-[0.3em] text-white/20",children:[a.jsx("span",{children:"Sub-Payload"}),(0,a.jsxs)("span",{children:["$",z.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-[11px] font-black uppercase tracking-[0.3em] text-white/20",children:[a.jsx("span",{children:"Protocol Fee"}),a.jsx("span",{children:"$0.00"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-5xl font-black italic text-white tracking-tighter uppercase leading-none pt-4",children:[a.jsx("span",{className:"nile-text-gradient",children:"Total"}),(0,a.jsxs)("span",{children:["$",z.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>_("cash"),className:"h-20 rounded-2xl glass-v2 flex flex-col items-center justify-center gap-2 group hover:border-emerald-500/40 transition-all",children:[a.jsx(u,{size:24,className:"text-emerald-500 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-emerald-500/60",children:"Cash Settle"})]}),(0,a.jsxs)("button",{onClick:()=>_("card"),className:"h-20 rounded-2xl glass-v2 flex flex-col items-center justify-center gap-2 group hover:border-indigo-500/40 transition-all",children:[a.jsx(f.Z,{size:24,className:"text-indigo-400 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-indigo-400/60",children:"Card Anchor"})]})]}),(0,a.jsxs)("button",{onClick:()=>_("card"),disabled:0===C.length,className:`w-full h-24 rounded-3xl btn-premium text-sm ${0===C.length?"opacity-20 cursor-not-allowed":""}`,children:[a.jsx(g.Z,{size:24,fill:"currentColor"}),"COMMIT SESSION"]})]})]})})]})]})}},5239:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\nilel\Projects\Sduan\New folder\nilelink\web\pos\src\app\terminal\layout.tsx#default`)},2091:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\nilel\Projects\Sduan\New folder\nilelink\web\pos\src\app\terminal\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[636,736,777,435,197],()=>s(6951));module.exports=a})();