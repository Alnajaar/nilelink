(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{3894:function(e,t,a){Promise.resolve().then(a.bind(a,4964))},8226:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},91:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},4794:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2926:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},1239:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},4964:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(7437),i=a(2265),r=a(8239),l=a(2926),n=a(9763);let c=(0,n.Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var d=a(91);let o=(0,n.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),x=(0,n.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var h=a(9397),p=a(4794);let m=(0,n.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),u=(0,n.Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var f=a(8226),y=a(1239),g=a(3523),v=a(1418);function j(){let{eventEngine:e,localLedger:t,recipeEngine:a,journalEngine:n,reputationEngine:j,isOnline:k,unsyncedCount:w,deviceId:b,branchId:N}=(0,g.F)(),[C,E]=(0,i.useState)([]),[M,D]=(0,i.useState)("All"),Z=[{id:1,name:"Burger Classic",price:12,category:"Main",icon:"\uD83C\uDF54"},{id:2,name:"Truffle Fries",price:6.5,category:"Sides",icon:"\uD83C\uDF5F"},{id:3,name:"Cairo Special Pizza",price:18,category:"Main",icon:"\uD83C\uDF55"},{id:4,name:"Iced Latte",price:4.5,category:"Drinks",icon:"â˜•"},{id:5,name:"Lava Cake",price:9,category:"Dessert",icon:"\uD83C\uDF70"},{id:6,name:"Falafel Wrap",price:7.5,category:"Main",icon:"\uD83C\uDF2F"}],z=["All",...Array.from(new Set(Z.map(e=>e.category)))],q=e=>{C.find(t=>t.id===e.id)?E(C.map(t=>t.id===e.id?{...t,qty:t.qty+1}:t)):E([...C,{...e,qty:1}])},S=e=>{let t=C.find(t=>t.id===e);t&&t.qty>1?E(C.map(t=>t.id===e?{...t,qty:t.qty-1}:t)):E(C.filter(t=>t.id!==e))},A=C.reduce((e,t)=>e+t.price*t.qty,0),F=async s=>{if(0!==C.length&&e&&t)try{let i="ord-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,5)),r="staff-default",l=await e.createEvent(v.t.ORDER_CREATED,r,{orderId:i,orderType:"dine-in"});for(let s of(await t.insertEvent(l),n&&await n.processEvent(l),C)){let l=await e.createEvent(v.t.ORDER_ITEM_ADDED,r,{orderId:i,menuItemId:s.id.toString(),menuItemName:s.name,quantity:s.qty,unitPrice:s.price});if(await t.insertEvent(l),a)try{for(let l of a.deductForSale(s.id.toString(),s.qty,N)){let a=await e.createEvent(v.t.INVENTORY_DEDUCTED,r,{ingredientId:l.ingredientId,ingredientName:l.ingredientName,quantity:l.deducted,unit:l.unit,reason:"sale",relatedOrderId:i});await t.insertEvent(a),n&&await n.processEvent(a)}}catch(e){console.warn("No recipe found for ".concat(s.name,", skipping inventory anchor."))}}let c="cash"===s?v.t.PAYMENT_COLLECTED_CASH:v.t.PAYMENT_COLLECTED_CARD,d={orderId:i,amount:A,currency:"USD"};"cash"===s?(d.amountTendered=A,d.changeGiven=0,d.cashierId=r):(d.cardType="visa",d.last4Digits="4242",d.transactionId="tx-".concat(Date.now()),d.providerFee=.02*A);let o=await e.createEvent(c,r,d);await t.insertEvent(o),n&&await n.processEvent(o),E([]),alert("Protocol Anchored: Order Settlement Complete")}catch(e){console.error("Checkout failed",e),alert("Protocol Error: Could not anchor event.")}};return(0,s.jsxs)("div",{className:"h-screen flex flex-col relative text-white selection:bg-emerald-500/30 overflow-hidden font-sans",children:[(0,s.jsx)("div",{className:"mesh-bg"}),(0,s.jsxs)("header",{className:"h-20 glass-v2 border-b border-white/5 flex items-center justify-between px-10 relative z-20",children:[(0,s.jsx)("div",{className:"flex items-center gap-6",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h1",{className:"text-2xl font-black italic tracking-tighter nile-text-gradient uppercase leading-none",children:"Nile Terminal"}),(0,s.jsxs)("span",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-white/20 mt-1",children:["Node: ",b||"Cairo-ST-01"]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-8",children:[(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-6 px-6 py-2 rounded-full glass-v2 border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[k?(0,s.jsx)(l.Z,{size:14,className:"text-emerald-400"}):(0,s.jsx)(c,{size:14,className:"text-red-400"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest ".concat(k?"text-emerald-400/60":"text-red-400/60"),children:k?"Network Live":"Offline Mode"})]}),(0,s.jsx)("div",{className:"w-px h-4 bg-white/10"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-white/30",children:[(0,s.jsx)(d.Z,{size:14}),(0,s.jsxs)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:[w," Queued Events"]})]})]}),(0,s.jsx)("button",{className:"w-12 h-12 rounded-2xl glass-v2 flex items-center justify-center text-white/40 hover:text-white transition-all",children:(0,s.jsx)(o,{size:20})}),(0,s.jsx)("button",{className:"w-12 h-12 rounded-2xl glass-v2 flex items-center justify-center text-white/40 hover:text-white transition-all",children:(0,s.jsx)(x,{size:20})})]})]}),(0,s.jsxs)("main",{className:"flex-1 flex overflow-hidden relative z-10",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col p-10 overflow-hidden",children:[(0,s.jsx)("div",{className:"flex gap-4 mb-10 overflow-x-auto pb-4 no-scrollbar",children:z.map(e=>(0,s.jsx)("button",{onClick:()=>D(e),className:"px-10 py-4 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all whitespace-nowrap ".concat(M===e?"bg-emerald-500 text-black shadow-lg shadow-emerald-500/20":"glass-v2 text-white/40 hover:bg-white/5"),children:e},e))}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-10",children:(0,s.jsx)(r.E.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Z.filter(e=>"All"===M||e.category===M).map((e,t)=>(0,s.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>q(e),className:"p-8 rounded-[2.5rem] glass-v2 flex flex-col gap-6 active:scale-95 transition-all cursor-pointer group hover:border-emerald-500/30",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-3xl bg-black border border-white/5 flex items-center justify-center text-4xl shadow-2xl group-hover:scale-110 transition-transform",children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-white group-hover:text-emerald-400 transition-colors uppercase italic tracking-tighter",children:e.name}),(0,s.jsx)("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.2em] mt-1",children:e.category})]}),(0,s.jsxs)("div",{className:"mt-auto flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-2xl font-black italic text-white/80",children:["$",e.price.toFixed(2)]}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl glass-v2 flex items-center justify-center text-emerald-400 opacity-0 group-hover:opacity-100 transition-all",children:(0,s.jsx)(h.Z,{size:20})})]})]},e.id))})})]}),(0,s.jsx)("div",{className:"w-[450px] glass-v2 border-l border-white/5 flex flex-col relative overflow-hidden",children:(0,s.jsxs)("div",{className:"p-10 flex flex-col h-full bg-black/20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,s.jsx)("h2",{className:"text-xl font-black italic uppercase tracking-tighter nile-text-gradient",children:"Active Cart"}),(0,s.jsx)("button",{onClick:()=>E([]),className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/20 hover:text-red-400 transition-colors",children:"Clear"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-6",children:0===C.length?(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-10 opacity-20",children:[(0,s.jsx)(p.Z,{size:64,className:"mb-6"}),(0,s.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Payload Empty"})]}):C.map((e,t)=>(0,s.jsxs)(r.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center gap-6 p-6 rounded-3xl glass-v2 border-white/5 group",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/5 flex items-center justify-center text-2xl",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-bold text-white uppercase italic tracking-tighter truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest mt-1",children:["$",e.price.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>S(e.id),className:"w-10 h-10 rounded-xl glass-v2 flex items-center justify-center hover:bg-white/5",children:(0,s.jsx)(m,{size:14})}),(0,s.jsx)("span",{className:"w-6 text-center text-lg font-black italic",children:e.qty}),(0,s.jsx)("button",{onClick:()=>q(e),className:"w-10 h-10 rounded-xl glass-v2 flex items-center justify-center hover:bg-white/5",children:(0,s.jsx)(h.Z,{size:14})})]})]},e.id))}),(0,s.jsxs)("div",{className:"mt-10 space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4 pt-8 border-t border-white/10",children:[(0,s.jsxs)("div",{className:"flex justify-between text-[11px] font-black uppercase tracking-[0.3em] text-white/20",children:[(0,s.jsx)("span",{children:"Sub-Payload"}),(0,s.jsxs)("span",{children:["$",A.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-[11px] font-black uppercase tracking-[0.3em] text-white/20",children:[(0,s.jsx)("span",{children:"Protocol Fee"}),(0,s.jsx)("span",{children:"$0.00"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-5xl font-black italic text-white tracking-tighter uppercase leading-none pt-4",children:[(0,s.jsx)("span",{className:"nile-text-gradient",children:"Total"}),(0,s.jsxs)("span",{children:["$",A.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>F("cash"),className:"h-20 rounded-2xl glass-v2 flex flex-col items-center justify-center gap-2 group hover:border-emerald-500/40 transition-all",children:[(0,s.jsx)(u,{size:24,className:"text-emerald-500 group-hover:scale-110 transition-transform"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-emerald-500/60",children:"Cash Settle"})]}),(0,s.jsxs)("button",{onClick:()=>F("card"),className:"h-20 rounded-2xl glass-v2 flex flex-col items-center justify-center gap-2 group hover:border-indigo-500/40 transition-all",children:[(0,s.jsx)(f.Z,{size:24,className:"text-indigo-400 group-hover:scale-110 transition-transform"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-indigo-400/60",children:"Card Anchor"})]})]}),(0,s.jsxs)("button",{onClick:()=>F("card"),disabled:0===C.length,className:"w-full h-24 rounded-3xl btn-premium text-sm ".concat(0===C.length?"opacity-20 cursor-not-allowed":""),children:[(0,s.jsx)(y.Z,{size:24,fill:"currentColor"}),"COMMIT SESSION"]})]})]})})]})]})}}},function(e){e.O(0,[218,847,685,175,971,117,744],function(){return e(e.s=3894)}),_N_E=e.O()}]);