(()=>{var e={};e.id=423,e.ids=[423],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7468:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(629),s(6139),s(2029),s(5866);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),n=s(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["driver",{children:["shift",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,629)),"C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\delivery\\src\\app\\driver\\shift\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6139)),"C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\delivery\\src\\app\\driver\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\delivery\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\nilel\\Projects\\Sduan\\New folder\\nilelink\\web\\delivery\\src\\app\\driver\\shift\\page.tsx"],h="/driver/shift/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/driver/shift/page",pathname:"/driver/shift",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3808:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3426:()=>{},9447:(e,t,s)=>{Promise.resolve().then(s.bind(s,9658))},3397:(e,t,s)=>{Promise.resolve().then(s.bind(s,7847))},4230:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5962:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9658:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(326),a=s(7577),i=s(434),l=s(5047),n=s(5920),d=s(9389),c=s(6671),o=s(9635),h=s(4014),x=s(2783);function p({children:e}){let t=(0,l.usePathname)(),[s,p]=(0,a.useState)(!0),u=[{icon:n.Z,label:"Home",path:"/driver/home"},{icon:d.Z,label:"Queue",path:"/driver/queue"},{icon:c.Z,label:"Wallet",path:"/driver/wallet"},{icon:o.Z,label:"Shift",path:"/driver/shift"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white flex flex-col font-sans selection:bg-emerald-500/30",children:[(0,r.jsxs)("div",{className:`fixed top-0 w-full z-50 px-4 py-2 flex justify-between items-center backdrop-blur-md border-b bg-black/50 ${s?"border-white/5":"border-red-500/20 bg-red-900/10"}`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(h.Z,{size:14,className:s?"text-emerald-500":"text-red-500"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-nile-silver/60",children:s?"NileLink Net: Connected":"OFFLINE MODE"})]}),!s&&r.jsx(x.Z,{size:14,className:"text-red-500 animate-pulse"})]}),r.jsx("main",{className:"flex-1 pb-24 pt-12 overflow-y-auto w-full max-w-md mx-auto",children:e}),r.jsx("nav",{className:"fixed bottom-0 w-full z-50 bg-[#050505]/90 backdrop-blur-xl border-t border-white/5 pb-safe",children:r.jsx("div",{className:"flex justify-around items-center w-full max-w-md mx-auto h-20",children:u.map(e=>{let s=t===e.path;return(0,r.jsxs)(i.default,{href:e.path,className:"flex-1 flex flex-col items-center justify-center gap-1 h-full active:scale-90 transition-transform",children:[r.jsx("div",{className:`p-1.5 rounded-xl transition-colors ${s?"bg-emerald-500 text-white":"text-nile-silver/40"}`,children:r.jsx(e.icon,{size:22,strokeWidth:s?2.5:2})}),r.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${s?"text-emerald-500":"text-nile-silver/20"}`,children:e.label})]},e.path)})})})]})}},7847:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(326),a=s(7577),i=s(5962),l=s(4019),n=s(6557);let d=(0,n.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),c=(0,n.Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),o=(0,n.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),h=(0,n.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var x=s(4230),p=s(8860),u=s(5047);function m(){let e=(0,u.useRouter)(),[t]=(0,a.useState)(()=>new p.D),[s,n]=(0,a.useState)("OPEN"),[m,f]=(0,a.useState)(!1),[b,g]=(0,a.useState)(0),[v,y]=(0,a.useState)(""),[w,j]=(0,a.useState)(""),k=async()=>{let s=parseFloat(v)||0;await t.endShift(s),e.push("/driver/login")},N=(parseFloat(v)||0)-b;return(0,r.jsxs)("div",{className:"flex flex-col gap-8 px-6",children:[r.jsx("header",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-white italic tracking-tighter uppercase mb-1",children:"Shift Control"}),r.jsx("p",{className:"text-xs font-black text-nile-silver/30 uppercase tracking-[0.2em]",children:"Operational Handshake"})]})}),r.jsx("div",{className:"p-8 rounded-[2.5rem] bg-white/[0.02] border border-white/5 flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:`w-16 h-16 rounded-3xl flex items-center justify-center transition-all ${"OPEN"===s?"bg-emerald-500 text-nile-dark":"bg-red-500/20 text-red-500"}`,children:r.jsx(i.Z,{size:32})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-xl font-black text-white italic uppercase tracking-tight",children:["Shift is ",s]}),r.jsx("div",{className:"text-[10px] font-bold text-nile-silver/20 uppercase tracking-[0.2em]",children:"Started: Dec 24, 09:00 AM"})]})]})}),"OPEN"===s?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("button",{onClick:()=>f(!0),className:"w-full h-24 rounded-[2rem] bg-red-500 active:bg-red-600 text-nile-dark active:scale-[0.98] transition-all flex items-center justify-between px-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start translate-z-0",children:[r.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 mb-1",children:"End Duty"}),r.jsx("span",{className:"text-2xl font-black italic tracking-tight uppercase",children:"Close Shift"})]}),r.jsx(l.Z,{size:32})]}),r.jsx("p",{className:"text-center text-[10px] font-bold text-nile-silver/20 uppercase tracking-widest",children:"Closing the shift requires final cash reconciliation."})]}):(0,r.jsxs)("button",{onClick:()=>e.push("/driver/login"),className:"w-full h-24 rounded-[2rem] bg-emerald-500 text-nile-dark font-black text-2xl italic flex items-center justify-center gap-4",children:["Open New Shift ",r.jsx(d,{size:32})]}),m&&r.jsx("div",{className:"fixed inset-0 z-50 bg-[#050505] flex flex-col p-6 animate-in slide-in-from-bottom duration-300",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col pt-12",children:[(0,r.jsxs)("header",{className:"mb-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-3xl bg-white/5 flex items-center justify-center text-white mx-auto mb-6",children:r.jsx(c,{size:32})}),r.jsx("h2",{className:"text-3xl font-black text-white italic uppercase mb-2",children:"Reconciliation"}),r.jsx("p",{className:"text-xs font-black text-nile-silver/30 uppercase tracking-[0.2em]",children:"Verify Physical Cash Balance"})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"p-8 rounded-4xl bg-white/5 border border-white/5 flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-bold text-nile-silver",children:"Digital Balance"}),(0,r.jsxs)("span",{className:"text-xl font-black text-white italic",children:[b.toFixed(2)," EGP"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-nile-silver/40 px-4",children:"Physical Count"}),r.jsx("input",{type:"number",value:v,onChange:e=>y(e.target.value),placeholder:"0.00",className:"w-full h-24 rounded-[2rem] bg-white/[0.03] border-2 border-white/5 focus:border-emerald-500/50 outline-none text-center text-4xl font-black italic text-white transition-all"})]}),""!==v&&Math.abs(N)>.01&&(0,r.jsxs)("div",{className:"p-8 rounded-[2rem] bg-red-500/10 border border-red-500/20 animate-in zoom-in-95 duration-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-red-500",children:[r.jsx(o,{size:20}),r.jsx("span",{className:"text-sm font-black uppercase tracking-widest",children:"Mismatch Detected"})]}),(0,r.jsxs)("span",{className:"text-2xl font-black text-red-500 italic",children:[N>0?"+":"",N.toFixed(2)]})]}),r.jsx("textarea",{value:w,onChange:e=>j(e.target.value),placeholder:"Reason for discrepancy...",className:"w-full h-24 rounded-2xl bg-black/40 border border-white/5 p-4 text-xs font-medium text-white placeholder:text-nile-silver/20 outline-none focus:border-red-500/40"})]}),(0,r.jsxs)("div",{className:"p-6 rounded-3xl bg-blue-500/5 border border-blue-500/10 flex gap-4",children:[r.jsx(h,{size:20,className:"text-blue-500 shrink-0"}),r.jsx("p",{className:"text-[10px] font-medium text-blue-500/70 leading-relaxed italic",children:"By submitting, you are cryptographically signing this end-of-shift report to the NileLink Ledger."})]})]}),(0,r.jsxs)("div",{className:"mt-auto flex gap-4 pt-12",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 h-20 rounded-3xl bg-white/5 text-white font-bold uppercase text-xs",children:"Cancel"}),(0,r.jsxs)("button",{onClick:k,disabled:!v,className:"flex-[2] h-20 rounded-3xl bg-red-500 text-nile-dark font-black uppercase text-sm tracking-widest flex items-center justify-center gap-3 disabled:opacity-50",children:["Submit & Close ",r.jsx(x.Z,{size:20})]})]})]})})]})}},8860:(e,t,s)=>{"use strict";s.d(t,{D:()=>a});class r{constructor(){this.dbName="nilelink_delivery_ledger"}init(){console.log("[MobileLedger] Initializing Local Chain..."),localStorage.getItem(this.dbName)||localStorage.setItem(this.dbName,JSON.stringify([]))}async recordEvent(e,t){let s=await this.getAllEvents(),r=s[s.length-1],a={id:"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),type:e,timestamp:Date.now(),actorId:"driver-current",deviceId:"device-mobile-01",hash:"pending-hash",prevHash:r?r.hash:null,payload:t,synced:!1};return a.hash=`${a.id}:${Date.now()}`,s.push(a),this.saveEvents(s),console.log(`[MobileLedger] ðŸ”— Block Mined: ${e}`,a),a}async getEvents(){return this.getAllEvents()}async getCashBalance(){let e=await this.getAllEvents(),t=0;for(let s of e)"CASH_COLLECTED"===s.type?t+=s.payload.amount||0:"CASH_DEPOSITED"===s.type&&(t-=s.payload.amount||0);return t}async getShiftStatus(){let e=(await this.getAllEvents()).reverse().find(e=>"SHIFT_OPEN"===e.type||"SHIFT_CLOSE"===e.type);return e&&"SHIFT_OPEN"===e.type?"OPEN":"CLOSED"}getAllEvents(){return[]}saveEvents(e){}}class a{constructor(){this.ledger=new r}async startShift(e){return"1234"===e&&(await this.ledger.recordEvent("SHIFT_OPEN",{method:"PIN"}),!0)}async endShift(e){let t=await this.ledger.getCashBalance();return await this.ledger.recordEvent("SHIFT_CLOSE",{confirmedBalance:e,sysBalance:t,variance:e-t}),!0}async acceptOrder(e){await this.ledger.recordEvent("TASK_ACCEPTED",{orderId:e})}async pickupOrder(e){await this.ledger.recordEvent("TASK_PICKED_UP",{orderId:e,location:"mock-lat-long"})}async completeDelivery(e,t,s){await this.ledger.recordEvent("TASK_COMPLETED",{orderId:e,proof:t}),s>0&&await this.ledger.recordEvent("CASH_COLLECTED",{orderId:e,amount:s})}async failDelivery(e,t){await this.ledger.recordEvent("TASK_FAILED",{orderId:e,reason:t})}async getCashInHand(){return this.ledger.getCashBalance()}async getShiftState(){return this.ledger.getShiftStatus()}}},6139:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\nilel\Projects\Sduan\New folder\nilelink\web\delivery\src\app\driver\layout.tsx#default`)},629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\nilel\Projects\Sduan\New folder\nilelink\web\delivery\src\app\driver\shift\page.tsx#default`)},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>l});var r=s(9510),a=s(5384),i=s.n(a);s(5023);let l={title:"NileLink | Decentralized Economic OS",description:"Operating the daily economy with events, ledger, and blockchain verified transparency."};function n({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:e})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935,487],()=>s(7468));module.exports=r})();