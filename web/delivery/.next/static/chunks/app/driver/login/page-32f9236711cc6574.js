(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{1989:function(e,t,a){Promise.resolve().then(a.bind(a,2816))},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{color:r="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:h="",children:u,...m}=a;return(0,s.createElement)("svg",{ref:l,...i,width:c,height:c,stroke:r,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(n(e)),h].join(" "),...m},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])});return a.displayName="".concat(e),a}},6858:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1804:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},2816:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437),i=a(2265),n=a(9376);let l=(0,a(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var r=a(1804),c=a(6858),o=a(2946);function d(){let e=(0,n.useRouter)(),[t,a]=(0,i.useState)("disclaimer"),[d,h]=(0,i.useState)(""),[u,m]=(0,i.useState)(!1),[g]=(0,i.useState)(()=>new o.D),x=async()=>{4===d.length&&(m(!0),await g.startShift(d)?e.push("/driver/home"):(alert("Invalid PIN"),h(""),m(!1)))},f=e=>{d.length<4&&h(t=>t+e)};return(0,s.jsx)("div",{className:"min-h-screen bg-nile-deep flex flex-col p-6",children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-center max-w-md mx-auto w-full",children:[(0,s.jsxs)("div",{className:"mb-12 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-emerald-500 flex items-center justify-center text-nile-dark mx-auto mb-6 shadow-2xl shadow-emerald-500/20",children:(0,s.jsx)(l,{size:40})}),(0,s.jsx)("h1",{className:"text-3xl font-black text-white italic uppercase tracking-tighter mb-2",children:"NileLink Driver"}),(0,s.jsx)("p",{className:"text-xs font-black text-nile-silver/30 uppercase tracking-[0.2em]",children:"Secure Logistics Protocol"})]}),"disclaimer"===t?(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-8",children:[(0,s.jsxs)("div",{className:"p-8 rounded-[2.5rem] bg-white/5 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-amber-500 mb-6",children:[(0,s.jsx)(r.Z,{size:24}),(0,s.jsx)("span",{className:"text-sm font-black uppercase tracking-widest",children:"Responsibility"})]}),(0,s.jsxs)("p",{className:"text-sm font-medium text-nile-silver leading-relaxed mb-6",children:["By opening this shift, you acknowledge that you are acting as a ",(0,s.jsx)("strong",{className:"text-white",children:"Mobile Cash Custodian"}),"."]}),(0,s.jsxs)("ul",{className:"space-y-4 mb-2",children:[(0,s.jsxs)("li",{className:"flex gap-4 text-xs font-bold text-nile-silver/60",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mt-1.5"}),"You are personally liable for all cash collected."]}),(0,s.jsxs)("li",{className:"flex gap-4 text-xs font-bold text-nile-silver/60",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mt-1.5"}),"Every delivery is cryptographically signed."]}),(0,s.jsxs)("li",{className:"flex gap-4 text-xs font-bold text-nile-silver/60",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mt-1.5"}),"GPS location is logged for every action."]})]})]}),(0,s.jsxs)("button",{onClick:()=>{a("pin")},className:"w-full h-20 bg-emerald-500 active:bg-emerald-600 text-nile-dark rounded-3xl font-black text-sm uppercase tracking-widest flex items-center justify-center gap-4 transition-all active:scale-95",children:["I Understand & Accept",(0,s.jsx)(c.Z,{size:20})]})]}):(0,s.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-8",children:[(0,s.jsx)("div",{className:"flex justify-center gap-6 mb-12",children:[0,1,2,3].map(e=>(0,s.jsx)("div",{className:"w-4 h-4 rounded-full transition-all ".concat(e<d.length?"bg-emerald-500 scale-125":"bg-white/10")},e))}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[[1,2,3,4,5,6,7,8,9].map(e=>(0,s.jsx)("button",{onClick:()=>f(e.toString()),className:"h-20 rounded-3xl bg-white/5 active:bg-white/20 text-3xl font-black text-white italic transition-all",children:e},e)),(0,s.jsx)("div",{}),(0,s.jsx)("button",{onClick:()=>f("0"),className:"h-20 rounded-3xl bg-white/5 active:bg-white/20 text-3xl font-black text-white italic transition-all",children:"0"}),(0,s.jsx)("button",{onClick:()=>h(e=>e.slice(0,-1)),className:"h-20 rounded-3xl active:bg-white/10 flex items-center justify-center text-nile-silver transition-all",children:(0,s.jsx)("span",{className:"text-xs font-black uppercase tracking-widest",children:"Del"})})]}),(0,s.jsx)("button",{onClick:x,disabled:4!==d.length||u,className:"w-full h-20 rounded-3xl font-black text-sm uppercase tracking-widest flex items-center justify-center gap-4 transition-all ".concat(4===d.length?"bg-white text-black active:scale-95":"bg-white/5 text-nile-silver/20 cursor-not-allowed"),children:u?"Verifying Identity...":"Open Shift"})]})]})})}},2946:function(e,t,a){"use strict";a.d(t,{D:function(){return i}});class s{init(){console.log("[MobileLedger] Initializing Local Chain..."),localStorage.getItem(this.dbName)||localStorage.setItem(this.dbName,JSON.stringify([]))}async recordEvent(e,t){let a=await this.getAllEvents(),s=a[a.length-1],i={id:"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),type:e,timestamp:Date.now(),actorId:"driver-current",deviceId:"device-mobile-01",hash:"pending-hash",prevHash:s?s.hash:null,payload:t,synced:!1};return i.hash="".concat(i.id,":").concat(Date.now()),a.push(i),this.saveEvents(a),console.log("[MobileLedger] \uD83D\uDD17 Block Mined: ".concat(e),i),i}async getEvents(){return this.getAllEvents()}async getCashBalance(){let e=await this.getAllEvents(),t=0;for(let a of e)"CASH_COLLECTED"===a.type?t+=a.payload.amount||0:"CASH_DEPOSITED"===a.type&&(t-=a.payload.amount||0);return t}async getShiftStatus(){let e=(await this.getAllEvents()).reverse().find(e=>"SHIFT_OPEN"===e.type||"SHIFT_CLOSE"===e.type);return e&&"SHIFT_OPEN"===e.type?"OPEN":"CLOSED"}getAllEvents(){let e=localStorage.getItem(this.dbName);return e?JSON.parse(e):[]}saveEvents(e){localStorage.setItem(this.dbName,JSON.stringify(e))}constructor(){this.dbName="nilelink_delivery_ledger",this.init()}}class i{async startShift(e){return"1234"===e&&(await this.ledger.recordEvent("SHIFT_OPEN",{method:"PIN"}),!0)}async endShift(e){let t=await this.ledger.getCashBalance();return await this.ledger.recordEvent("SHIFT_CLOSE",{confirmedBalance:e,sysBalance:t,variance:e-t}),!0}async acceptOrder(e){await this.ledger.recordEvent("TASK_ACCEPTED",{orderId:e})}async pickupOrder(e){await this.ledger.recordEvent("TASK_PICKED_UP",{orderId:e,location:"mock-lat-long"})}async completeDelivery(e,t,a){await this.ledger.recordEvent("TASK_COMPLETED",{orderId:e,proof:t}),a>0&&await this.ledger.recordEvent("CASH_COLLECTED",{orderId:e,amount:a})}async failDelivery(e,t){await this.ledger.recordEvent("TASK_FAILED",{orderId:e,reason:t})}async getCashInHand(){return this.ledger.getCashBalance()}async getShiftState(){return this.ledger.getShiftStatus()}constructor(){this.ledger=new s}}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1989)}),_N_E=e.O()}]);