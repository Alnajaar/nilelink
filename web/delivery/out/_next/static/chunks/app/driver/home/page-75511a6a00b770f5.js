(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{7016:function(e,t,s){Promise.resolve().then(s.bind(s,4294))},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},9688:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]])},1804:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},4294:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),i=s(2265),r=s(7648),n=s(9688),l=s(1804);let c=(0,s(9763).Z)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);var d=s(6858),o=s(2946);function h(){let[e,t]=(0,i.useState)(0),[s,h]=(0,i.useState)(!0),[x]=(0,i.useState)(()=>new o.D);return(0,i.useEffect)(()=>{(async()=>{t(await x.getCashInHand())})()},[x]),(0,a.jsxs)("div",{className:"flex flex-col gap-6 px-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-black text-white italic tracking-tighter uppercase mb-1",children:"Omar K."}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-emerald-500":"bg-nile-silver/20")}),(0,a.jsx)("span",{className:"text-xs font-bold text-nile-silver/50 uppercase tracking-widest",children:s?"On Duty":"Paused"})]})]}),(0,a.jsx)("button",{onClick:()=>h(!s),className:"w-14 h-14 rounded-2xl flex items-center justify-center transition-all ".concat(s?"bg-emerald-500 text-nile-dark":"bg-white/5 text-nile-silver"),children:(0,a.jsx)(n.Z,{size:22,strokeWidth:3})})]}),(0,a.jsxs)("div",{className:"p-8 rounded-[2.5rem] bg-gradient-to-br from-emerald-900/40 to-black border border-emerald-500/20 relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:scale-110 transition-transform duration-500",children:(0,a.jsx)(l.Z,{size:120})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 mb-4",children:[(0,a.jsx)(l.Z,{size:18}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Cash Custody"})]}),(0,a.jsxs)("div",{className:"text-5xl font-black text-white italic tracking-tighter mb-2",children:[e.toFixed(2)," ",(0,a.jsx)("span",{className:"text-xl not-italic text-nile-silver/40",children:"EGP"})]}),(0,a.jsx)("p",{className:"text-xs font-medium text-nile-silver/40",children:"You are responsible for depositing this amount."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/5",children:[(0,a.jsx)("div",{className:"text-2xl font-black text-white italic mb-1",children:2}),(0,a.jsx)("div",{className:"text-[10px] font-black text-nile-silver/40 uppercase tracking-widest",children:"Active"})]}),(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/5",children:[(0,a.jsx)("div",{className:"text-2xl font-black text-white italic mb-1",children:"14"}),(0,a.jsx)("div",{className:"text-[10px] font-black text-nile-silver/40 uppercase tracking-widest",children:"Done"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-end mb-4",children:(0,a.jsx)("h2",{className:"text-xs font-black text-nile-silver/30 uppercase tracking-widest",children:"Current Mission"})}),(0,a.jsx)(r.default,{href:"/driver/transit/1",className:"block",children:(0,a.jsxs)("div",{className:"p-6 rounded-[2rem] bg-indigo-600 active:scale-95 transition-all text-white relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-md",children:(0,a.jsx)(c,{size:24})}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-lg bg-white/20 text-[10px] font-black uppercase tracking-widest backdrop-blur-md",children:"Pickup"})]}),(0,a.jsx)("h3",{className:"text-2xl font-black italic uppercase leading-none mb-1",children:"Cairo Grill"}),(0,a.jsx)("p",{className:"text-xs font-medium text-white/60 mb-6",children:"12 Tahrir Sq, Downtown"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest bg-black/20 self-start inline-flex px-4 py-3 rounded-xl backdrop-blur-md",children:["Continue Mission ",(0,a.jsx)(d.Z,{size:14})]})]}),(0,a.jsx)("div",{className:"absolute -right-8 -bottom-8 opacity-20 rotate-[-15deg]",children:(0,a.jsx)(c,{size:180})})]})})]})]})}},2946:function(e,t,s){"use strict";s.d(t,{D:function(){return i}});class a{init(){console.log("[MobileLedger] Initializing Local Chain..."),localStorage.getItem(this.dbName)||localStorage.setItem(this.dbName,JSON.stringify([]))}async recordEvent(e,t){let s=await this.getAllEvents(),a=s[s.length-1],i={id:"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),type:e,timestamp:Date.now(),actorId:"driver-current",deviceId:"device-mobile-01",hash:"pending-hash",prevHash:a?a.hash:null,payload:t,synced:!1};return i.hash="".concat(i.id,":").concat(Date.now()),s.push(i),this.saveEvents(s),console.log("[MobileLedger] \uD83D\uDD17 Block Mined: ".concat(e),i),i}async getEvents(){return this.getAllEvents()}async getCashBalance(){let e=await this.getAllEvents(),t=0;for(let s of e)"CASH_COLLECTED"===s.type?t+=s.payload.amount||0:"CASH_DEPOSITED"===s.type&&(t-=s.payload.amount||0);return t}async getShiftStatus(){let e=(await this.getAllEvents()).reverse().find(e=>"SHIFT_OPEN"===e.type||"SHIFT_CLOSE"===e.type);return e&&"SHIFT_OPEN"===e.type?"OPEN":"CLOSED"}getAllEvents(){let e=localStorage.getItem(this.dbName);return e?JSON.parse(e):[]}saveEvents(e){localStorage.setItem(this.dbName,JSON.stringify(e))}constructor(){this.dbName="nilelink_delivery_ledger",this.init()}}class i{async startShift(e){return"1234"===e&&(await this.ledger.recordEvent("SHIFT_OPEN",{method:"PIN"}),!0)}async endShift(e){let t=await this.ledger.getCashBalance();return await this.ledger.recordEvent("SHIFT_CLOSE",{confirmedBalance:e,sysBalance:t,variance:e-t}),!0}async acceptOrder(e){await this.ledger.recordEvent("TASK_ACCEPTED",{orderId:e})}async pickupOrder(e){await this.ledger.recordEvent("TASK_PICKED_UP",{orderId:e,location:"mock-lat-long"})}async completeDelivery(e,t,s){await this.ledger.recordEvent("TASK_COMPLETED",{orderId:e,proof:t}),s>0&&await this.ledger.recordEvent("CASH_COLLECTED",{orderId:e,amount:s})}async failDelivery(e,t){await this.ledger.recordEvent("TASK_FAILED",{orderId:e,reason:t})}async getCashInHand(){return this.ledger.getCashBalance()}async getShiftState(){return this.ledger.getShiftStatus()}constructor(){this.ledger=new a}}}},function(e){e.O(0,[451,971,117,744],function(){return e(e.s=7016)}),_N_E=e.O()}]);