(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{7234:function(e,t,s){Promise.resolve().then(s.bind(s,3735))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{color:n="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:h="",children:x,...p}=s;return(0,a.createElement)("svg",{ref:l,...i,width:c,height:c,stroke:n,strokeWidth:o?24*Number(d)/Number(c):d,className:["lucide","lucide-".concat(r(e)),h].join(" "),...p},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(x)?x:[x]])});return s.displayName="".concat(e),s}},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1804:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},3735:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7437),i=s(2265),r=s(1804),l=s(9763);let n=(0,l.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var c=s(740);let d=(0,l.Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),o=(0,l.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),h=(0,l.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var x=s(2946);function p(){let[e,t]=(0,i.useState)(0),[s,l]=(0,i.useState)([]),[p]=(0,i.useState)(()=>new x.D);return(0,i.useEffect)(()=>{(async()=>{let e=await p.getCashInHand(),s=await p.ledger.getEvents();t(e),l(s.filter(e=>"CASH_COLLECTED"===e.type||"CASH_DEPOSITED"===e.type).reverse())})()},[p]),(0,a.jsxs)("div",{className:"flex flex-col gap-8 px-6",children:[(0,a.jsxs)("header",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-black text-white italic tracking-tighter uppercase mb-1",children:"Vault"}),(0,a.jsx)("p",{className:"text-xs font-black text-nile-silver/30 uppercase tracking-[0.2em]",children:"Cash Custody Ledger"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 text-[10px] font-black uppercase tracking-widest",children:"Audited"})]}),(0,a.jsxs)("div",{className:"p-10 rounded-[3rem] bg-white/[0.02] border border-white/5 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"text-[10px] font-black uppercase tracking-widest text-nile-silver/40 mb-2",children:"Total Cash In Hand"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-5xl font-black text-white italic tracking-tighter",children:e.toFixed(2)}),(0,a.jsx)("span",{className:"text-lg font-bold text-nile-silver/20 uppercase tracking-widest",children:"EGP"})]})]}),(0,a.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03]",children:(0,a.jsx)(r.Z,{size:140})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/5",children:[(0,a.jsx)("div",{className:"text-xs font-black text-nile-silver/20 uppercase tracking-widest mb-1",children:"Today's Take"}),(0,a.jsxs)("div",{className:"text-xl font-black text-emerald-400",children:["+",e.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/5",children:[(0,a.jsx)("div",{className:"text-xs font-black text-nile-silver/20 uppercase tracking-widest mb-1",children:"Discrepancy"}),(0,a.jsx)("div",{className:"text-xl font-black text-white",children:"0.00"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h2",{className:"text-xs font-black text-nile-silver/40 uppercase tracking-widest flex items-center gap-2",children:[(0,a.jsx)(n,{size:14})," Activity Log"]}),(0,a.jsx)("button",{className:"p-2 rounded-lg bg-white/5 text-nile-silver",children:(0,a.jsx)(c.Z,{size:14})})]}),(0,a.jsx)("div",{className:"space-y-3",children:s.length>0?s.map(e=>(0,a.jsxs)("div",{className:"p-5 rounded-3xl bg-white/5 border border-white/5 flex items-center justify-between group hover:bg-white/[0.08] transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center ".concat("CASH_COLLECTED"===e.type?"bg-emerald-500/10 text-emerald-500":"bg-blue-500/10 text-blue-50"),children:"CASH_COLLECTED"===e.type?(0,a.jsx)(d,{size:20}):(0,a.jsx)(o,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-bold text-white uppercase tracking-tight",children:"CASH_COLLECTED"===e.type?"Order #".concat(e.payload.orderId.split("-")[1]):"Deposit to Store"}),(0,a.jsxs)("div",{className:"text-[10px] font-black text-nile-silver/20 uppercase tracking-widest",children:[new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," â€¢ ",e.id.substring(0,8)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-black italic ".concat("CASH_COLLECTED"===e.type?"text-emerald-400":"text-blue-400"),children:["CASH_COLLECTED"===e.type?"+":"-",e.payload.amount.toFixed(2)]}),(0,a.jsx)("div",{className:"text-[10px] font-bold text-nile-silver/20 uppercase tracking-widest",children:"EGP"})]})]},e.id)):(0,a.jsxs)("div",{className:"py-20 text-center flex flex-col items-center gap-4 opacity-20",children:[(0,a.jsx)(h,{size:40}),(0,a.jsx)("p",{className:"text-xs font-black uppercase tracking-widest italic",children:"No financial events recorded"})]})})]}),(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-amber-500/5 border border-amber-500/10 flex gap-4",children:[(0,a.jsx)(h,{size:20,className:"text-amber-500 shrink-0"}),(0,a.jsx)("p",{className:"text-[11px] font-medium text-amber-500/70 leading-relaxed italic",children:"Any mismatch between the physical cash and this digital ledger must be reported during shift closure."})]})]})}},2946:function(e,t,s){"use strict";s.d(t,{D:function(){return i}});class a{init(){console.log("[MobileLedger] Initializing Local Chain..."),localStorage.getItem(this.dbName)||localStorage.setItem(this.dbName,JSON.stringify([]))}async recordEvent(e,t){let s=await this.getAllEvents(),a=s[s.length-1],i={id:"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),type:e,timestamp:Date.now(),actorId:"driver-current",deviceId:"device-mobile-01",hash:"pending-hash",prevHash:a?a.hash:null,payload:t,synced:!1};return i.hash="".concat(i.id,":").concat(Date.now()),s.push(i),this.saveEvents(s),console.log("[MobileLedger] \uD83D\uDD17 Block Mined: ".concat(e),i),i}async getEvents(){return this.getAllEvents()}async getCashBalance(){let e=await this.getAllEvents(),t=0;for(let s of e)"CASH_COLLECTED"===s.type?t+=s.payload.amount||0:"CASH_DEPOSITED"===s.type&&(t-=s.payload.amount||0);return t}async getShiftStatus(){let e=(await this.getAllEvents()).reverse().find(e=>"SHIFT_OPEN"===e.type||"SHIFT_CLOSE"===e.type);return e&&"SHIFT_OPEN"===e.type?"OPEN":"CLOSED"}getAllEvents(){let e=localStorage.getItem(this.dbName);return e?JSON.parse(e):[]}saveEvents(e){localStorage.setItem(this.dbName,JSON.stringify(e))}constructor(){this.dbName="nilelink_delivery_ledger",this.init()}}class i{async startShift(e){return"1234"===e&&(await this.ledger.recordEvent("SHIFT_OPEN",{method:"PIN"}),!0)}async endShift(e){let t=await this.ledger.getCashBalance();return await this.ledger.recordEvent("SHIFT_CLOSE",{confirmedBalance:e,sysBalance:t,variance:e-t}),!0}async acceptOrder(e){await this.ledger.recordEvent("TASK_ACCEPTED",{orderId:e})}async pickupOrder(e){await this.ledger.recordEvent("TASK_PICKED_UP",{orderId:e,location:"mock-lat-long"})}async completeDelivery(e,t,s){await this.ledger.recordEvent("TASK_COMPLETED",{orderId:e,proof:t}),s>0&&await this.ledger.recordEvent("CASH_COLLECTED",{orderId:e,amount:s})}async failDelivery(e,t){await this.ledger.recordEvent("TASK_FAILED",{orderId:e,reason:t})}async getCashInHand(){return this.ledger.getCashBalance()}async getShiftState(){return this.ledger.getShiftStatus()}constructor(){this.ledger=new a}}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7234)}),_N_E=e.O()}]);